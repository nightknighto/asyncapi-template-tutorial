{"version":3,"file":"index.js","sources":["../components/TopicFunction.js","../template/index.js"],"sourcesContent":["/*\r\n * This component returns a block of functions that user can use to send messages to specific topic.\r\n * As input it requires a list of Channel models from the parsed AsyncAPI document\r\n */\r\nexport function TopicFunction({ channels }) {\r\n    const topicsDetails = getTopics(channels);\r\n    let functions = '';\r\n  \r\n    topicsDetails.forEach((t) => {\r\n      functions += `def send${t.name}(self, id):\r\n          topic = \"${t.topic}\"\r\n          self.client.publish(topic, id)\\n`\r\n    });\r\n  \r\n    return functions;\r\n  }\r\n  \r\n  /*\r\n   * This function returns a list of objects, one for each channel with two properties, name and topic\r\n   * name - holds information about the operationId provided in the AsyncAPI document\r\n   * topic - holds information about the address of the topic\r\n   *\r\n   * As input it requires a list of Channel models from the parsed AsyncAPI document\r\n   */\r\n  function getTopics(channels) {\r\n    const channelsCanSendTo = channels;\r\n    let topicsDetails = [];\r\n  \r\n    channelsCanSendTo.forEach((ch) => {\r\n      const topic = {};\r\n      const operationId = ch.operations().filterByReceive()[0].id();\r\n      topic.name = operationId.charAt(0).toUpperCase() + operationId.slice(1);\r\n      topic.topic = ch.address();\r\n  \r\n      topicsDetails.push(topic);\r\n    })\r\n  \r\n    return topicsDetails;\r\n  }","import { File, Text } from \"@asyncapi/generator-react-sdk\";\r\nimport { TopicFunction } from \"../components/TopicFunction\";\r\n\r\nexport default function ({ asyncapi, params }) {\r\n    return (\r\n        <File name=\"client.py\">\r\n            <Text newLines={2}>import paho.mqtt.client as mqtt</Text>\r\n            <Text newLines={2}>mqttBroker = \"{asyncapi.servers().get(params.server).url()}\"</Text>\r\n            <Text newLines={2}>class {asyncapi.info().title().replaceAll(' ', '')}Client:</Text>\r\n            <Text indent={2} newLines={2}>\r\n                {`def __init__(self):\r\n                    self.client = mqtt.Client()\r\n                    self.client.connect(mqttBroker)`}\r\n            </Text>\r\n            <Text indent={2} newLines={2}>\r\n                <TopicFunction channels={asyncapi.channels().filterByReceive()} />\r\n            </Text>\r\n        </File>\r\n    )\r\n}"],"names":["TopicFunction","channels","topicsDetails","getTopics","functions","forEach","t","name","topic","channelsCanSendTo","ch","operationId","operations","filterByReceive","id","charAt","toUpperCase","slice","address","push","asyncapi","params","_jsxs","File","children","_jsx","Text","newLines","servers","get","server","url","info","title","replaceAll","indent"],"mappings":"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"}